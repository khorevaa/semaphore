Перем СписокСемафоров;

Функция Получить(КлючСемафора, Счетчик = 1) Экспорт
	Семафор = СписокСемафоров.Получить(КлючСемафора);
	Если Семафор = Неопределено Тогда
		Семафор = Новый Семафор(Счетчик);
		СписокСемафоров.Вставить(КлючСемафора, Семафор);
	КонецЕсли;

	Возврат Семафор;
КонецФункции

СписокСемафоров = Новый Соответствие();